<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProTrader X</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <script src="https://s3.tradingview.com/tv.js"></script>
  <link rel="manifest" href="/manifest.json">
  <script src="https://cdn.tailwindcss.com"></script>  // CDN warning'i sik et, production'da build et
  <style>
    body { font-family: 'Segoe UI', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
    .light-mode { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); color: #0f172a; }
    // ... Önceki style'lar aynı, kopyala ...
  </style>
</head>
<body class="text-gray-100 gradient-bg">

<!-- Auth Screen -->
<div id="authScreen" class="min-h-screen flex items-center justify-center">
  <div class="bg-gray-800 p-10 rounded-2xl shadow-2xl w-full max-w-md border border-gray-700">
    <h1 class="text-4xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600">ProTrader X</h1>

    <div id="registerForm" class="space-y-6">
      <h2 class="text-2xl font-semibold text-center">Kayıt Ol</h2>
      <input type="text" id="regName" placeholder="Ad Soyad" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
      <input type="email" id="regEmail" placeholder="E-posta" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
      <input type="password" id="regPass" placeholder="Şifre" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
      <button onclick="register()" class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold hover:opacity-90 transition">
        Kayıt Ol
      </button>
      <p class="text-center text-sm">Zaten hesabın var mı? <span onclick="toggleAuth()" class="text-blue-400 cursor-pointer hover:underline">Giriş yap</span></p>
    </div>

    <div id="loginForm" class="space-y-6 hidden">
      <h2 class="text-2xl font-semibold text-center">Giriş Yap</h2>
      <input type="email" id="loginEmail" placeholder="E-posta" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
      <input type="password" id="loginPass" placeholder="Şifre" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"/>
      <button onclick="login()" class="w-full py-3 bg-gradient-to-r from-green-600 to-teal-600 rounded-lg font-bold hover:opacity-90 transition">
        Giriş Yap
      </button>
      <p class="text-center text-sm">Hesabın yok mu? <span onclick="toggleAuth()" class="text-blue-400 cursor-pointer hover:underline">Kayıt ol</span></p>
    </div>

    <div id="authMessage" class="mt-4 text-center text-red-400 font-medium"></div>
  </div>
</div>

<!-- Trader Dashboard and other HTML sections (önceki gibi, tam kopyala) -->

<script>
  console.log('JS loaded OK');
  console.log('LocalStorage test: ', localStorage); // Bak, object gösterirse OK, null ise browser sik

  function toggleAuth() {
    console.log('Toggle Auth called');
    document.getElementById("registerForm").classList.toggle("hidden");
    document.getElementById("loginForm").classList.toggle("hidden");
    document.getElementById("authMessage").textContent = "";
  }

  function showAuthMessage(msg, className = "text-red-400") {
    console.log('Message: ', msg);
    const el = document.getElementById("authMessage");
    el.textContent = msg;
    el.className = `mt-4 text-center font-medium ${className}`;
  }

  function register() {
    console.log('Register called');
    const name = document.getElementById("regName").value.trim();
    const email = document.getElementById("regEmail").value.trim().toLowerCase();
    const pass = document.getElementById("regPass").value;

    if (!name || !email || !pass) {
      showAuthMessage("Tüm alanlar doldurulmalı!");
      return;
    }

    try {
      if (localStorage.getItem(email)) {
        showAuthMessage("Bu e-posta zaten kayıtlı!");
        return;
      }

      const user = { name, email, pass, balance: 10000, positions: [], logs: [], banned: false };
      localStorage.setItem(email, JSON.stringify(user));
      showAuthMessage("Kayıt başarılı! Giriş yap.", "text-green-400");
      toggleAuth();
    } catch (e) {
      console.log('LocalStorage error: ', e);
      showAuthMessage("Depolama hatası! Browser ayarlarını kontrol et.");
    }
  }

  // Login and other functions (önceki gibi, log'lu yap)

  // ... Tam JS, önceki mesajlardan kopyala, ama log'lu ...
</script>
</body>
</html>
